_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{Mybo:function(e,t,a){"use strict";a.r(t);var c=a("vJKn"),r=a.n(c),n=a("rg98"),s=a("nKUr"),i=a("H+61"),l=a("UlJF"),o=a("7LId"),d=a("VIvw"),u=a("iHvq"),b=a("q1tI"),p=a.n(b),j=a("wx14"),O=a("zmn3"),h=a("iuhU"),f=(a("17x9"),a("ZeOK")),m=a("ICNK"),v=a("Y53p"),g=a("H+2d");function x(e){var t=e.children,a=e.className,c=Object(h.a)(a),r=Object(m.a)(x,e),n=Object(v.a)(x,e);return p.a.createElement(n,Object(j.a)({},r,{className:c}),t)}x.handledProps=["as","children","className"],x.defaultProps={as:"tbody"},x.propTypes={};var w=x,y=a("MZgk"),N=a("D1pA");function R(e){var t=e.active,a=e.children,c=e.className,r=e.collapsing,n=e.content,s=e.disabled,i=e.error,l=e.icon,o=e.negative,d=e.positive,u=e.selectable,b=e.singleLine,O=e.textAlign,x=e.verticalAlign,w=e.warning,y=e.width,A=Object(h.a)(Object(f.a)(t,"active"),Object(f.a)(r,"collapsing"),Object(f.a)(s,"disabled"),Object(f.a)(i,"error"),Object(f.a)(o,"negative"),Object(f.a)(d,"positive"),Object(f.a)(u,"selectable"),Object(f.a)(b,"single line"),Object(f.a)(w,"warning"),Object(f.d)(O),Object(f.f)(x),Object(f.g)(y,"wide"),c),P=Object(m.a)(R,e),E=Object(v.a)(R,e);return g.a.isNil(a)?p.a.createElement(E,Object(j.a)({},P,{className:A}),N.a.create(l),n):p.a.createElement(E,Object(j.a)({},P,{className:A}),a)}R.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],R.defaultProps={as:"td"},R.propTypes={},R.create=Object(y.e)(R,(function(e){return{content:e}}));var A=R;function P(e){var t=e.children,a=e.className,c=e.content,r=e.fullWidth,n=Object(h.a)(Object(f.a)(r,"full-width"),a),s=Object(m.a)(P,e),i=Object(v.a)(P,e);return p.a.createElement(i,Object(j.a)({},s,{className:n}),g.a.isNil(t)?c:t)}P.handledProps=["as","children","className","content","fullWidth"],P.defaultProps={as:"thead"},P.propTypes={};var E=P;function k(e){var t=e.as,a=Object(m.a)(k,e);return p.a.createElement(E,Object(j.a)({},a,{as:t}))}k.handledProps=["as"],k.propTypes={},k.defaultProps={as:"tfoot"};var q=k;function C(e){var t=e.as,a=e.className,c=e.sorted,r=Object(h.a)(Object(f.e)(c,"sorted"),a),n=Object(m.a)(C,e);return p.a.createElement(A,Object(j.a)({},n,{as:t,className:r}))}C.handledProps=["as","className","sorted"],C.propTypes={},C.defaultProps={as:"th"};var T=C;function D(e){var t=e.active,a=e.cellAs,c=e.cells,r=e.children,n=e.className,s=e.disabled,i=e.error,l=e.negative,o=e.positive,d=e.textAlign,u=e.verticalAlign,b=e.warning,x=Object(h.a)(Object(f.a)(t,"active"),Object(f.a)(s,"disabled"),Object(f.a)(i,"error"),Object(f.a)(l,"negative"),Object(f.a)(o,"positive"),Object(f.a)(b,"warning"),Object(f.d)(d),Object(f.f)(u),n),w=Object(m.a)(D,e),y=Object(v.a)(D,e);return g.a.isNil(r)?p.a.createElement(y,Object(j.a)({},w,{className:x}),Object(O.a)(c,(function(e){return A.create(e,{defaultProps:{as:a}})}))):p.a.createElement(y,Object(j.a)({},w,{className:x}),r)}D.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],D.defaultProps={as:"tr",cellAs:"td"},D.propTypes={},D.create=Object(y.e)(D,(function(e){return{cells:e}}));var I=D;function z(e){var t=e.attached,a=e.basic,c=e.celled,r=e.children,n=e.className,s=e.collapsing,i=e.color,l=e.columns,o=e.compact,d=e.definition,u=e.fixed,b=e.footerRow,x=e.headerRow,y=e.headerRows,N=e.inverted,R=e.padded,A=e.renderBodyRow,P=e.selectable,k=e.singleLine,C=e.size,T=e.sortable,D=e.stackable,_=e.striped,H=e.structured,K=e.tableData,M=e.textAlign,S=e.unstackable,L=e.verticalAlign,F=Object(h.a)("ui",i,C,Object(f.a)(c,"celled"),Object(f.a)(s,"collapsing"),Object(f.a)(d,"definition"),Object(f.a)(u,"fixed"),Object(f.a)(N,"inverted"),Object(f.a)(P,"selectable"),Object(f.a)(k,"single line"),Object(f.a)(T,"sortable"),Object(f.a)(D,"stackable"),Object(f.a)(_,"striped"),Object(f.a)(H,"structured"),Object(f.a)(S,"unstackable"),Object(f.b)(t,"attached"),Object(f.b)(a,"basic"),Object(f.b)(o,"compact"),Object(f.b)(R,"padded"),Object(f.d)(M),Object(f.f)(L),Object(f.g)(l,"column"),"table",n),B=Object(m.a)(z,e),Z=Object(v.a)(z,e);if(!g.a.isNil(r))return p.a.createElement(Z,Object(j.a)({},B,{className:F}),r);var G={defaultProps:{cellAs:"th"}},J=(x||y)&&p.a.createElement(E,null,I.create(x,G),Object(O.a)(y,(function(e){return I.create(e,G)})));return p.a.createElement(Z,Object(j.a)({},B,{className:F}),J,p.a.createElement(w,null,A&&Object(O.a)(K,(function(e,t){return I.create(A(e,t))}))),b&&p.a.createElement(q,null,I.create(b)))}z.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],z.defaultProps={as:"table"},z.propTypes={},z.Body=w,z.Cell=A,z.Footer=q,z.Header=E,z.HeaderCell=T,z.Row=I;var _=z,H=a("QetY"),K=a("8cHP"),M=a("CafY"),S=a("yktz"),L=a("+Css"),F=a("cpVT"),B=a("TbSc"),Z=a("x/e0");function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,c=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(c,arguments,r)}else a=c.apply(this,arguments);return Object(d.a)(this,a)}}var J=function(e){Object(o.a)(a,e);var t=G(a);function a(){var e;Object(i.a)(this,a);for(var c=arguments.length,s=new Array(c),l=0;l<c;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),Object(F.a)(Object(L.a)(e),"state",{loading:!1,errorMessage:""}),Object(F.a)(Object(L.a)(e),"onApprove",Object(n.a)(r.a.mark((function t(){var a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,errorMessage:"In progress"}),t.prev=1,a=Object(S.a)(e.props.address),t.next=5,window.ethereum.enable();case 5:return t.next=7,window.web3.eth.accounts;case 7:return c=t.sent,t.next=10,a.methods.approveRequest(e.props.id).send({from:c[0]});case 10:Router.replaceRoute("/campaigns/".concat(e.props.address,"/requests")),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e.setState({errorMessage:t.t0.message});case 16:e.setState({loading:!1});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))),Object(F.a)(Object(L.a)(e),"onFinalize",Object(n.a)(r.a.mark((function t(){var a,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,errorMessage:"In Progress"}),t.prev=1,a=Object(S.a)(e.props.address),t.next=5,window.ethereum.enable();case 5:return t.next=7,window.web3.eth.accounts;case 7:return c=t.sent,t.next=10,a.methods.finalizeRequest(e.props.id).send({from:c[0]});case 10:Router.replaceRoute("/campaigns/".concat(e.props.address,"/requests")),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e.setState({errorMessage:t.t0.message});case 16:e.setState({loading:!1});case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=_.Row,t=_.Cell,a=this.props,c=a.id,r=a.request,n=a.totalApprovers,i=r.approversCount>n/2;return Object(s.jsxs)(e,{disabled:r.complete,positive:i&&!r.complete,children:[Object(s.jsx)(t,{children:c}),Object(s.jsx)(t,{children:r.description}),Object(s.jsx)(t,{children:Z.a.utils.fromWei(r.value,"ether")}),Object(s.jsx)(t,{children:r.recipient}),Object(s.jsxs)(t,{children:[r.approversCount,"/",n]}),Object(s.jsx)(t,{children:r.complete?null:Object(s.jsx)(H.a,{loading:this.state.loading,color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),Object(s.jsx)(t,{children:r.complete?null:Object(s.jsx)(H.a,{loading:this.state.loading,color:"teal",basic:!0,onClick:this.onFinalize,children:"Finalize"})}),Object(s.jsx)(t,{children:Object(s.jsxs)("i",{style:{overflow:"auto"},children:[" ",Object(s.jsx)(B.a,{content:this.state.errorMessage})]})})]})}}]),a}(b.Component);function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,c=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;a=Reflect.construct(c,arguments,r)}else a=c.apply(this,arguments);return Object(d.a)(this,a)}}var W=function(e){Object(o.a)(a,e);var t=U(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,a){return Object(s.jsx)(J,{id:a,request:t,address:e.props.address,totalApprovers:e.props.totalApprovers},a)}))}},{key:"render",value:function(){var e=_.Header,t=_.Row,a=_.HeaderCell,c=_.Body;return Object(s.jsxs)(M.a,{children:[Object(s.jsx)("h3",{children:"Requests"}),Object(s.jsx)(K.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:Object(s.jsx)("a",{children:Object(s.jsx)(H.a,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),Object(s.jsxs)(_,{children:[Object(s.jsx)(e,{children:Object(s.jsxs)(t,{children:[Object(s.jsx)(a,{children:"ID"}),Object(s.jsx)(a,{children:"Description"}),Object(s.jsx)(a,{children:"Amount"}),Object(s.jsx)(a,{children:"Recipient"}),Object(s.jsx)(a,{children:"Approval Count"}),Object(s.jsx)(a,{children:"Approve"}),Object(s.jsx)(a,{children:"Finalize"}),Object(s.jsx)(a,{children:"Transaction status"})]})}),Object(s.jsx)(c,{children:this.renderRows()})]}),Object(s.jsxs)("div",{children:["Found ",this.props.requestCount," requests."]})]})}}],[{key:"getInitialProps",value:function(){var e=Object(n.a)(r.a.mark((function e(t){var a,c,n,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.address,c=Object(S.a)(a),e.next=4,c.methods.getRequestCount().call();case 4:return n=e.sent,e.next=7,c.methods.totalApprovers().call();case 7:return s=e.sent,e.next=10,Promise.all(Array(parseInt(n)).fill().map((function(e,t){return c.methods.allRequests(t).call()})));case 10:return i=e.sent,e.abrupt("return",{address:a,requests:i,requestCount:n,totalApprovers:s});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(b.Component);t.default=W},TbSc:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var c=a("wx14"),r=a("dI71"),n=a("LrWZ"),s=a("iuhU"),i=(a("17x9"),a("q1tI")),l=a.n(i),o=a("ZeOK"),d=a("ICNK"),u=a("Y53p"),b=a("H+2d"),p=a("MZgk"),j=a("D1pA");function O(e){var t=e.children,a=e.className,r=e.content,n=Object(s.a)("content",a),i=Object(d.a)(O,e),o=Object(u.a)(O,e);return l.a.createElement(o,Object(c.a)({},i,{className:n}),b.a.isNil(t)?r:t)}O.handledProps=["as","children","className","content"],O.propTypes={};var h=O;function f(e){var t=e.children,a=e.className,r=e.content,n=Object(s.a)("header",a),i=Object(d.a)(f,e),o=Object(u.a)(f,e);return l.a.createElement(o,Object(c.a)({},i,{className:n}),b.a.isNil(t)?r:t)}f.handledProps=["as","children","className","content"],f.propTypes={},f.create=Object(p.e)(f,(function(e){return{content:e}}));var m=f,v=a("zmn3");function g(e){var t=e.children,a=e.className,r=e.content,n=Object(s.a)("content",a),i=Object(d.a)(g,e),o=Object(u.a)(g,e);return l.a.createElement(o,Object(c.a)({},i,{className:n}),b.a.isNil(t)?r:t)}g.handledProps=["as","children","className","content"],g.propTypes={},g.defaultProps={as:"li"},g.create=Object(p.e)(g,(function(e){return{content:e}}));var x=g;function w(e){var t=e.children,a=e.className,r=e.items,n=Object(s.a)("list",a),i=Object(d.a)(w,e),o=Object(u.a)(w,e);return l.a.createElement(o,Object(c.a)({},i,{className:n}),b.a.isNil(t)?Object(v.a)(r,x.create):t)}w.handledProps=["as","children","className","items"],w.propTypes={},w.defaultProps={as:"ul"},w.create=Object(p.e)(w,(function(e){return{items:e}}));var y=w,N=function(e){function t(){for(var t,a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))||this).handleDismiss=function(e){var a=t.props.onDismiss;a&&a(e,t.props)},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,a=e.attached,r=e.children,i=e.className,O=e.color,f=e.compact,v=e.content,g=e.error,x=e.floating,w=e.header,N=e.hidden,R=e.icon,A=e.info,P=e.list,E=e.negative,k=e.onDismiss,q=e.positive,C=e.size,T=e.success,D=e.visible,I=e.warning,z=Object(s.a)("ui",O,C,Object(o.a)(f,"compact"),Object(o.a)(g,"error"),Object(o.a)(x,"floating"),Object(o.a)(N,"hidden"),Object(o.a)(R,"icon"),Object(o.a)(A,"info"),Object(o.a)(E,"negative"),Object(o.a)(q,"positive"),Object(o.a)(T,"success"),Object(o.a)(D,"visible"),Object(o.a)(I,"warning"),Object(o.b)(a,"attached"),"message",i),_=k&&l.a.createElement(j.a,{name:"close",onClick:this.handleDismiss}),H=Object(d.a)(t,this.props),K=Object(u.a)(t,this.props);return b.a.isNil(r)?l.a.createElement(K,Object(c.a)({},H,{className:z}),_,j.a.create(R,{autoGenerateKey:!1}),(!Object(n.a)(w)||!Object(n.a)(v)||!Object(n.a)(P))&&l.a.createElement(h,null,m.create(w,{autoGenerateKey:!1}),y.create(P,{autoGenerateKey:!1}),Object(p.c)(v,{autoGenerateKey:!1}))):l.a.createElement(K,Object(c.a)({},H,{className:z}),_,r)},t}(i.Component);N.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],N.propTypes={},N.Content=h,N.Header=m,N.List=y,N.Item=x},cpVT:function(e,t,a){"use strict";function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return c}))},"m/hO":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return a("Mybo")}])}},[["m/hO",0,2,1,3,5]]]);